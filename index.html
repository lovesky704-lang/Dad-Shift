<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>çˆ¸çˆ¸ç­è¡¨æŸ¥è©¢</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft JhengHei", sans-serif;
      margin: 0;
      padding: 16px;
      background: #f3f4f6;
      color: #111827;
    }

    .app {
      max-width: 480px;
      margin: 0 auto;
    }

    .card {
      background: #ffffff;
      border-radius: 16px;
      padding: 16px 18px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.06);
      margin-bottom: 16px;
    }

    .title {
      font-size: 22px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .subtitle {
      font-size: 13px;
      color: #6b7280;
      margin-bottom: 12px;
    }

    .today-label {
      font-size: 14px;
      color: #6b7280;
      margin-bottom: 4px;
    }

    .today-date {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .today-weekday {
      font-size: 14px;
      color: #4b5563;
      margin-bottom: 12px;
    }

    .shift-tag {
      display: inline-block;
      padding: 8px 14px;
      border-radius: 999px;
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .shift-æ—©ç­ {
      background: #fef3c7;
      color: #b45309;
    }

    .shift-æ™šç­ {
      background: #ffedd5;
      color: #c2410c;
    }

    .shift-å¤§å¤œ {
      background: #dbeafe;
      color: #1d4ed8;
    }

    .shift-ä¼‘æ¯ {
      background: #e5e7eb;
      color: #374151;
    }

    .small-hint {
      font-size: 12px;
      color: #9ca3af;
    }

    .section-title {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .section-title span.emoji {
      font-size: 16px;
    }

    label {
      font-size: 13px;
      display: block;
      margin-bottom: 4px;
      color: #4b5563;
    }

    input[type="date"] {
      width: 100%;
      padding: 8px 10px;
      font-size: 14px;
      border-radius: 10px;
      border: 1px solid #d1d5db;
      box-sizing: border-box;
    }

    .query-result {
      margin-top: 10px;
      font-size: 14px;
    }

    .query-result-strong {
      font-weight: 600;
    }

    .week-list {
      margin-top: 8px;
      border-top: 1px solid #e5e7eb;
      padding-top: 8px;
    }

    .week-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 4px 0;
      font-size: 13px;
    }

    .week-date {
      color: #4b5563;
    }

    .week-shift {
      font-weight: 500;
    }

    .badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 11px;
      background: #eff6ff;
      color: #1d4ed8;
      margin-left: 6px;
    }

    .start-config {
      font-size: 12px;
      color: #6b7280;
      margin-top: 4px;
    }

    .start-config input[type="date"] {
      font-size: 12px;
      padding: 6px 8px;
      margin-top: 4px;
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- ä»Šå¤©ç­åˆ¥å¡ç‰‡ -->
    <div class="card">
      <div class="title">çˆ¸çˆ¸ä»Šæ—¥ç­è¡¨</div>
      <div class="subtitle">
        ä¾è¦å‰‡ï¼šå¤§å¤œ5å¤© â†’ ä¼‘2å¤© â†’ æ™šç­5å¤© â†’ ä¼‘2å¤© â†’ æ—©ç­5å¤© â†’ ä¼‘2å¤©ï¼ˆ21å¤©å¾ªç’°ï¼‰
      </div>

      <div class="today-label">ä»Šå¤©æ—¥æœŸ</div>
      <div id="todayDate" class="today-date">-</div>
      <div id="todayWeekday" class="today-weekday">-</div>

      <div id="todayShiftTag" class="shift-tag shift-ä¼‘æ¯">-</div>
      <div class="small-hint" id="todayShiftText"></div>

      <div class="week-list" id="weekList">
        <!-- é€™è£¡æœƒç”¨ JS å¡«å…¥æœªä¾† 7 å¤© -->
      </div>
    </div>

    <!-- æŸ¥è©¢ä»»æ„æ—¥æœŸ -->
    <div class="card">
      <div class="section-title">
        <span class="emoji">ğŸ”</span>
        æŸ¥è©¢æŒ‡å®šæ—¥æœŸç­åˆ¥
      </div>
      <label for="queryDate">é¸æ“‡æ—¥æœŸï¼š</label>
      <input type="date" id="queryDate" />

      <div id="queryResult" class="query-result"></div>
    </div>

    <!-- è¨­å®šå¾ªç’°èµ·å§‹æ—¥ -->
    <div class="card">
      <div class="section-title">
        <span class="emoji">âš™ï¸</span>
        è¼ªç­å¾ªç’°è¨­å®š
        <span class="badge">é€²éš</span>
      </div>
      <div style="font-size:13px; color:#4b5563;">
        ç›®å‰èµ·å§‹æ—¥è¨­å®šç‚ºï¼š<span id="startDateDisplay" style="font-weight:600;"></span><br />
        è¦å‰‡ï¼šé€™ä¸€å¤©è¦–ç‚º <span style="font-weight:600;">ã€Œå¤§å¤œç¬¬1å¤©ï¼ˆå¾ªç’°ç¬¬1å¤©ï¼‰ã€</span>ã€‚
      </div>
      <div class="start-config">
        è‹¥å…¬å¸å°‡ä¾†èª¿æ•´ç­è¡¨ï¼Œåªéœ€ä¿®æ”¹ä¸‹é¢çš„èµ·å§‹æ—¥ï¼Œæ‰€æœ‰è¨ˆç®—æœƒè‡ªå‹•æ›´æ–°ï¼š<br />
        <input type="date" id="startDateInput" />
      </div>
    </div>
  </div>

  <script>
    // ====== ç­è¡¨é‚è¼¯è¨­å®š ======
    // é è¨­å¾ªç’°èµ·å§‹æ—¥ï¼š2025-12-07ï¼ˆå¤§å¤œç¬¬1å¤©ï¼‰
    // æœˆä»½å¾ 0 é–‹å§‹ï¼Œæ‰€ä»¥ 11 ä»£è¡¨ 12 æœˆ
    let startDate = new Date(2025, 11, 7);
    startDate.setHours(0, 0, 0, 0);

    const MS_PER_DAY = 24 * 60 * 60 * 1000;
    const weekdayNames = ["æ—¥", "ä¸€", "äºŒ", "ä¸‰", "å››", "äº”", "å…­"];

    function formatDate(d) {
      const y = d.getFullYear();
      const m = String(d.getMonth() + 1).padStart(2, "0");
      const day = String(d.getDate()).padStart(2, "0");
      return `${y}/${m}/${day}`;
    }

    function formatDateForInput(d) {
      const y = d.getFullYear();
      const m = String(d.getMonth() + 1).padStart(2, "0");
      const day = String(d.getDate()).padStart(2, "0");
      return `${y}-${m}-${day}`;
    }

    // å¤§å¤œ5 â†’ ä¼‘2 â†’ æ™šç­5 â†’ ä¼‘2 â†’ æ—©ç­5 â†’ ä¼‘2ï¼ˆ21å¤©å¾ªç’°ï¼‰
    function getShift(date) {
      const d = new Date(date);
      d.setHours(0, 0, 0, 0);
      const diffDays = Math.floor((d - startDate) / MS_PER_DAY);
      // æ”¯æ´å¾€å‰æ¨ç®—ï¼Œçµæœå›ºå®šåœ¨ 0~20
      const index = ((diffDays % 21) + 21) % 21;

      // 0~4ï¼šå¤§å¤œ
      // 5~6ï¼šä¼‘æ¯
      // 7~11ï¼šæ™šç­
      // 12~13ï¼šä¼‘æ¯
      // 14~18ï¼šæ—©ç­
      // 19~20ï¼šä¼‘æ¯
      if (index >= 0 && index <= 4) return "å¤§å¤œ";
      if (index >= 5 && index <= 6) return "ä¼‘æ¯";
      if (index >= 7 && index <= 11) return "æ™šç­";
      if (index >= 12 && index <= 13) return "ä¼‘æ¯";
      if (index >= 14 && index <= 18) return "æ—©ç­";
      if (index >= 19 && index <= 20) return "ä¼‘æ¯";
      return "ä¼‘æ¯";
    }

    function updateTodayCard() {
      const today = new Date();
      today.setHours(0, 0, 0, 0);

      const todayDateEl = document.getElementById("todayDate");
      const todayWeekdayEl = document.getElementById("todayWeekday");
      const todayShiftTag = document.getElementById("todayShiftTag");
      const todayShiftText = document.getElementById("todayShiftText");

      const shift = getShift(today);

      todayDateEl.textContent = formatDate(today);
      todayWeekdayEl.textContent = `æ˜ŸæœŸ${weekdayNames[today.getDay()]}`;

      // æ¸…æ‰èˆŠ classï¼Œå†åŠ æ–°çš„
      todayShiftTag.className = "shift-tag";
      todayShiftTag.classList.add(`shift-${shift}`);
      todayShiftTag.textContent = shift === "ä¼‘æ¯" ? "ä¼‘æ¯æ—¥" : `${shift}ç­`;

      if (shift === "ä¼‘æ¯") {
        todayShiftText.textContent = "ä»Šå¤©çˆ¸çˆ¸ä¼‘æ¯ï¼Œå¯ä»¥å¥½å¥½æ”¾é¬† ğŸ˜Œ";
      } else {
        todayShiftText.textContent = `ä»Šå¤©çˆ¸çˆ¸æ˜¯ã€Œ${shift}ç­ã€ï¼Œè¾›è‹¦äº†ï¼`;
      }

      // æ›´æ–°æœªä¾† 7 å¤©åˆ—è¡¨
      updateWeekList(today);
    }

    function updateWeekList(baseDate) {
      const container = document.getElementById("weekList");
      container.innerHTML = "";

      const title = document.createElement("div");
      title.style.fontSize = "13px";
      title.style.color = "#6b7280";
      title.style.marginBottom = "4px";
      title.textContent = "æœªä¾† 7 å¤©ç­åˆ¥ä¸€è¦½ï¼š";
      container.appendChild(title);

      for (let i = 0; i < 7; i++) {
        const d = new Date(baseDate.getTime() + i * MS_PER_DAY);
        d.setHours(0, 0, 0, 0);
        const shift = getShift(d);

        const item = document.createElement("div");
        item.className = "week-item";

        const left = document.createElement("div");
        left.className = "week-date";
        left.textContent = `${formatDate(d)}ï¼ˆæ˜ŸæœŸ${weekdayNames[d.getDay()]}ï¼‰`;

        const right = document.createElement("div");
        right.className = "week-shift";
        // A æ–¹æ¡ˆï¼šä¸å†å¤šåŠ ã€Œç­ã€ï¼Œé¿å…å‡ºç¾ã€Œæ—©ç­ç­ã€
        right.textContent = shift;

        item.appendChild(left);
        item.appendChild(right);
        container.appendChild(item);
      }
    }

    function handleQueryDateChange() {
      const input = document.getElementById("queryDate");
      const result = document.getElementById("queryResult");
      if (!input.value) {
        result.textContent = "";
        return;
      }
      const d = new Date(input.value);
      if (isNaN(d.getTime())) {
        result.textContent = "æ—¥æœŸæ ¼å¼ä¸æ­£ç¢ºã€‚";
        return;
      }
      const shift = getShift(d);
      const weekName = weekdayNames[d.getDay()];

      // é€™è£¡ä¸€æ¨£åªé¡¯ç¤ºã€Œæ—©ç­ / æ™šç­ / å¤§å¤œ / ä¼‘æ¯ã€ï¼Œä¸å†å¤šåŠ ã€Œç­ã€
      result.innerHTML = `
        <span class="query-result-strong">${formatDate(d)}ï¼ˆæ˜ŸæœŸ${weekName}ï¼‰</span>
        çš„ç­åˆ¥ç‚ºï¼š
        <span class="query-result-strong">${shift}</span>
      `;
    }

    function handleStartDateChange() {
      const input = document.getElementById("startDateInput");
      const display = document.getElementById("startDateDisplay");
      if (!input.value) return;

      const d = new Date(input.value);
      if (isNaN(d.getTime())) return;

      d.setHours(0, 0, 0, 0);
      startDate = d;
      display.textContent = formatDate(startDate);

      // èµ·å§‹æ—¥è®Šäº†ï¼Œè¦é‡æ–°æ›´æ–°ç•«é¢
      updateTodayCard();
      handleQueryDateChange();
    }

    document.addEventListener("DOMContentLoaded", () => {
      // åˆå§‹åŒ–èµ·å§‹æ—¥é¡¯ç¤º
      const startDateDisplay = document.getElementById("startDateDisplay");
      const startDateInput = document.getElementById("startDateInput");
      startDateDisplay.textContent = formatDate(startDate);
      startDateInput.value = formatDateForInput(startDate);

      // è¨­å®šæŸ¥è©¢æ—¥æœŸé è¨­ç‚ºä»Šå¤©
      const queryDateInput = document.getElementById("queryDate");
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      queryDateInput.value = formatDateForInput(today);

      // ç¶å®šäº‹ä»¶
      queryDateInput.addEventListener("change", handleQueryDateChange);
      startDateInput.addEventListener("change", handleStartDateChange);

      // åˆå§‹åŒ–ç•«é¢
      updateTodayCard();
      handleQueryDateChange();
    });
  </script>
</body>
</html>


