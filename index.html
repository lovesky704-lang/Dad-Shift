<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>爸爸今日班表</title>

  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft JhengHei", sans-serif;
      background: #f3f4f6;
      margin: 0;
      padding: 16px;
      color: #111827;
    }

    .app {
      max-width: 480px;
      margin: auto;
    }

    .card {
      background: #fff;
      border-radius: 16px;
      padding: 16px;
      margin-bottom: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,.06);
    }

    .title {
      font-size: 22px;
      font-weight: 700;
    }

    .subtitle {
      font-size: 13px;
      color: #6b7280;
      margin-bottom: 12px;
    }

    .shift-tag {
      display: inline-block;
      padding: 8px 14px;
      border-radius: 999px;
      font-weight: 600;
      margin-top: 6px;
    }

    .shift-早班 { background:#fef3c7; color:#92400e; }
    .shift-晚班 { background:#ffedd5; color:#9a3412; }
    .shift-大夜 { background:#dbeafe; color:#1e40af; }
    .shift-休息 { background:#e5e7eb; color:#374151; }

    .week-item {
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      padding: 4px 0;
    }

    input[type="date"] {
      width: 100%;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #d1d5db;
    }
  </style>
</head>

<body>
<div class="app">

  <div class="card">
    <div class="title">爸爸今日班表</div>
    <div class="subtitle">
      晚班6 → 休2 → 早班6 → 休2 → 大夜6 → 休2（24 天循環）
    </div>

    <div id="todayDate"></div>
    <div id="todayWeekday"></div>
    <div id="todayShift" class="shift-tag"></div>

    <div style="margin-top:10px;font-size:13px;color:#6b7280">
      未來 7 天：
    </div>
    <div id="weekList"></div>
  </div>

  <div class="card">
    <div class="subtitle">查詢指定日期</div>
    <input type="date" id="queryDate" />
    <div id="queryResult" style="margin-top:8px;font-weight:600"></div>
  </div>

</div>

<script>
  // ====== 起始日設定 ======
  // 2025/12/15 = 晚班第 1 天
  let startDate = new Date(2025, 11, 15);
  startDate.setHours(0,0,0,0);

  const MS = 24 * 60 * 60 * 1000;
  const weekName = ["日","一","二","三","四","五","六"];

  // ====== 24 天完整循環 ======
  const cycle = [
    "晚班","晚班","晚班","晚班","晚班","晚班",
    "休息","休息",
    "早班","早班","早班","早班","早班","早班",
    "休息","休息",
    "大夜","大夜","大夜","大夜","大夜","大夜",
    "休息","休息"
  ];

  function getShift(date){
    const d = new Date(date);
    d.setHours(0,0,0,0);
    const diff = Math.floor((d - startDate) / MS);
    const idx = ((diff % cycle.length) + cycle.length) % cycle.length;
    return cycle[idx];
  }

  function fmt(d){
    return `${d.getFullYear()}/${d.getMonth()+1}/${d.getDate()}`;
  }

  function render(){
    const today = new Date();
    today.setHours(0,0,0,0);
    const shift = getShift(today);

    document.getElementById("todayDate").textContent = fmt(today);
    document.getElementById("todayWeekday").textContent = "星期" + weekName[today.getDay()];

    const tag = document.getElementById("todayShift");
    tag.className = "shift-tag shift-" + shift;
    tag.textContent = shift;

    const list = document.getElementById("weekList");
    list.innerHTML = "";
    for(let i=0;i<7;i++){
      const d = new Date(today.getTime() + i*MS);
      const s = getShift(d);
      const div = document.createElement("div");
      div.className = "week-item";
      div.innerHTML = `<span>${fmt(d)}（${weekName[d.getDay()]}）</span><span>${s}</span>`;
      list.appendChild(div);
    }
  }

  document.getElementById("queryDate").addEventListener("change", e=>{
    const d = new Date(e.target.value);
    document.getElementById("queryResult").textContent =
      fmt(d) + " 是「" + getShift(d) + "」";
  });

  render();
</script>
</body>
</html>
